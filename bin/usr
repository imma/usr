#!/usr/bin/env bash

function main {
  local shome="$(cd -P -- "${BASH_SOURCE%/*}/.." && pwd -P)"
  source "$shome/script/profile"

  if [[ -z "${1:-}" ]]; then
    exec usr list
  fi

  local nm_user_pool="${1}"; shift

  if ! type -P usr-"${1:-}" >/dev/null; then
    if [[ -z "${1:-}" ]]; then
      exec usr list "${nm_user_pool}"
      return $?
    fi
  fi

  if ! type -P usr-"${1:-}" >/dev/null; then
    set -- user "$@"
  fi

  export USR_POOL_ID="$(usr list "${nm_user_pool}" .Id)"
  exec usr "$@"
}

source sub "$BASH_SOURCE" "$@"
